- name: comments
  enabled: [$html-files]
  schema:
    object:
      additionalProperties: false
      properties:
        utterances:
          object:
            properties:
              repo:
                string:
                  description: The Github repo that will be used to store comments.
              label:
                string:
                  description: The label that will be assigned to issues created by Utterances.
              theme:
                string:
                  description: The Github theme that should be used for Utterances.
                  completions:
                    - github-light
                    - github-dark
                    - github-dark-orange
                    - icy-dark
                    - dark-blue
                    - photon-dark
                    - body-light
                    - gruvbox-dark
                issue-term:
                  string:
                    description: How posts should be mapped to Github issues.
                    completions:
                      - pathname
                      - url
                      - title
                      - og:title
            required: [repo]
        hypothesis:
          oneOf:
            - boolean
            - object:
                properties:
                  openSidebar:
                    boolean:
                      default: false
                      description: Controls whether the sidebar opens automatically on startup.
                  showHighlights:
                    oneOf:
                      - boolean
                      - enum: ["always", "never"]
                    default: "always"
                    description: Controls whether the in-document highlights are shown by default.
                  theme:
                    enum: ["classic", "clean"]
                    default: classic
                    description: Controls the overall look of the sidebar.
                  enableExperimentalNewNoteButton:
                    boolean:
                      default: false
                      description: |
                        Controls whether the experimental New Note button 
                        should be shown in the notes tab in the sidebar.
                  usernameUrl:
                    string: |
                      Specify a URL to direct a user to, 
                      in a new tab. when they click on the annotation author 
                      link in the header of an annotation.
                  services:
                    arrayOf:
                      object:
                        properties:
                          apiUrl:
                            string:
                              description: The base URL of the service API.
                          authority:
                            string:
                              description: The domain name which the annotation service is associated with.
                          grantToken:
                            string:
                              description: An OAuth 2 grant token which the client can send to the service in order to get an access token for making authenticated requests to the service.
                          allowLeavingGroups:
                            boolean:
                              default: true
                              description: A flag indicating whether users should be able to leave groups of which they are a member.
                          enableShareLinks:
                            boolean:
                              default: true
                              description: A flag indicating whether annotation cards should show links that take the user to see an annotation in context.
                          groups:
                            oneOf:
                              - enum: ["$rpc:requestGroups"]
                              - arrayOf: string
                            description: An array of Group IDs or the literal string `$rpc:requestGroups`
                          icon:
                            string:
                              description: The URL to an image for the annotation service. This image will appear to the left of the name of the currently selected group.
                        required: [apiUrl, authority, grantToken]
                        description: |
                          Alternative annotation services which the client should 
                          connect to instead of connecting to the public Hypothesis 
                          service at hypothes.is.
                  branding:
                    object:
                      properties:
                        accentColor:
                          string:
                            description: Secondary color for elements of the commenting UI.
                        appBackgroundColor:
                          string:
                            description: The main background color of the commenting UI.
                        ctaBackgroundColor:
                          string:
                            description: The background color for call to action buttons.
                        selectionFontFamily:
                          string:
                            description: The font family for selection text in the annotation card.
                        annotationFontFamily:
                          string:
                            description: The font family for the actual annotation value that the user writes about the page or selection.
                      description: Settings to adjust the commenting sidebar's look and feel.
                  externalContainerSelector:
                    string:
                      description: A CSS selector specifying the containing element into which the sidebar iframe will be placed.
                  focus:
                    object:
                      properties:
                        user:
                          object:
                            username:
                              string:
                                description: The username of the user to focus on.
                            userid:
                              string:
                                description: The userid of the user to focus on.
                            displayName:
                              string:
                                description: The display name of the user to focus on.
                      required: [user]
                    description: Defines a focused filter set for the available annotations on a page.
                  requestConfigFromFrame:
                    object:
                      properties:
                        origin:
                          string:
                            description: Host url and port number of receiving iframe
                        ancestorLevel:
                          number:
                            description: Number of nested iframes deep the client is relative from the receiving iframe.
                  assetRoot:
                    string:
                      description: The root URL from which assets are loaded.
                  sidebarAppUrl:
                    string:
                      description: The URL for the sidebar application which displays annotations.
                      default: "https://hypothes.is/app.html"
