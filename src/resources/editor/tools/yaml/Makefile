all: yaml.js

clean:
	rm -f yaml.js

automation.build.js: automation.js validator-queue.js tree-sitter-annotated-yaml.js parsing.js schemas.js 
	esbuild --bundle automation.js --outfile=automation.build.js --format=iife

yaml.js: core-lib.js tree-sitter.js external/ajv7.bundle.js ajv-stub.js automation.build.js
	echo "// this is auto-generated by a script - don't edit directly!" > yaml.js
	cat external/ajv7.bundle.js ajv-stub.js core-lib.js tree-sitter.js automation.build.js >> yaml.js

