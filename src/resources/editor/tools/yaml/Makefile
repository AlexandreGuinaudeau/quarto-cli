all: yaml.js

clean:
	rm -f yaml.js ajv-fix-module.js

# ajv-fix-module.js: external/ajv7.bundle.js
# 	echo "(function () {"                   > ajv-fix-module.js
# 	echo "  let module = { };"             >> ajv-fix-module.js
# 	cat external/ajv7.bundle.js            >> ajv-fix-module.js
# #	echo "  window.ajv7 = module.exports;" >> ajv-fix-module.js
# 	echo "}());"                           >> ajv-fix-module.js
# # 	esbuild --bundle ajv-stub.js --outfile=ajv-iife.js --format=iife

yaml.js: core-lib.js tree-sitter.js yaml.src.js tree-sitter-annotated-yaml.js external/ajv7.bundle.js ajv-stub.js 
	echo "// this is auto-generated by a script - don't edit directly!" > yaml.js
	cat external/ajv7.bundle.js ajv-stub.js core-lib.js tree-sitter.js yaml.src.js tree-sitter-annotated-yaml.js >> yaml.js
