/* esm.sh - esbuild bundle(jszip@3.5.0) deno production */
import  { Buffer as __Buffer$ } from "https://deno.land/std@0.165.0/node/buffer.ts";import __set_immediate_shim$ from "/v99/set-immediate-shim@1.0.1/deno/set-immediate-shim.js";import { Readable as __readable_stream$Readable } from "/v99/readable-stream@2.3.7/deno/readable-stream.js";import __lie$ from "/v99/lie@3.3.0/deno/lie.js";import __pako$ from "/v99/pako@1.0.11/deno/pako.js";var qt=Object.create;var hr=Object.defineProperty;var zt=Object.getOwnPropertyDescriptor;var Lt=Object.getOwnPropertyNames;var Ut=Object.getPrototypeOf,Nt=Object.prototype.hasOwnProperty;var K=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var f=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Wt=(e,r,t,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of Lt(r))!Nt.call(e,n)&&n!==t&&hr(e,n,{get:()=>r[n],enumerable:!(i=zt(r,n))||i.enumerable});return e};var Zt=(e,r,t)=>(t=e!=null?qt(Ut(e)):{},Wt(r||!e||!e.__esModule?hr(t,"default",{value:e,enumerable:!0}):t,e));var k=f(v=>{"use strict";v.base64=!0;v.array=!0;v.string=!0;v.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u";v.nodebuffer=typeof __Buffer$<"u";v.uint8array=typeof Uint8Array<"u";if(typeof ArrayBuffer>"u")v.blob=!1;else{Ie=new ArrayBuffer(0);try{v.blob=new Blob([Ie],{type:"application/zip"}).size===0}catch{try{cr=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,Oe=new cr,Oe.append(Ie),v.blob=Oe.getBlob("application/zip").size===0}catch{v.blob=!1}}}var Ie,cr,Oe;try{v.nodestream=!!__readable_stream$Readable}catch{v.nodestream=!1}});var Te=f(Fe=>{"use strict";var Mt=l(),jt=k(),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Fe.encode=function(e){for(var r=[],t,i,n,s,a,o,u,h=0,p=e.length,m=p,g=Mt.getTypeOf(e)!=="string";h<e.length;)m=p-h,g?(t=e[h++],i=h<p?e[h++]:0,n=h<p?e[h++]:0):(t=e.charCodeAt(h++),i=h<p?e.charCodeAt(h++):0,n=h<p?e.charCodeAt(h++):0),s=t>>2,a=(t&3)<<4|i>>4,o=m>1?(i&15)<<2|n>>6:64,u=m>2?n&63:64,r.push(_.charAt(s)+_.charAt(a)+_.charAt(o)+_.charAt(u));return r.join("")};Fe.decode=function(e){var r,t,i,n,s,a,o,u=0,h=0,p="data:";if(e.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");var m=e.length*3/4;if(e.charAt(e.length-1)===_.charAt(64)&&m--,e.charAt(e.length-2)===_.charAt(64)&&m--,m%1!==0)throw new Error("Invalid base64 input, bad content length.");var g;for(jt.uint8array?g=new Uint8Array(m|0):g=new Array(m|0);u<e.length;)n=_.indexOf(e.charAt(u++)),s=_.indexOf(e.charAt(u++)),a=_.indexOf(e.charAt(u++)),o=_.indexOf(e.charAt(u++)),r=n<<2|s>>4,t=(s&15)<<4|a>>2,i=(a&3)<<6|o,g[h++]=r,a!==64&&(g[h++]=t),o!==64&&(g[h++]=i);return g}});var J=f((fn,lr)=>{"use strict";lr.exports={isNode:typeof __Buffer$<"u",newBufferFrom:function(e,r){if(__Buffer$.from&&__Buffer$.from!==Uint8Array.from)return __Buffer$.from(e,r);if(typeof e=="number")throw new Error('The "data" argument must not be a number');return new __Buffer$(e,r)},allocBuffer:function(e){if(__Buffer$.alloc)return __Buffer$.alloc(e);var r=new __Buffer$(e);return r.fill(0),r},isBuffer:function(e){return __Buffer$.isBuffer(e)},isStream:function(e){return e&&typeof e.on=="function"&&typeof e.pause=="function"&&typeof e.resume=="function"}}});var W=f((hn,dr)=>{"use strict";var De=null;typeof Promise<"u"?De=Promise:De=__lie$;dr.exports={Promise:De}});var l=f(d=>{"use strict";var F=k(),Ht=Te(),Z=J(),Yt=__set_immediate_shim$,Re=W();function Xt(e){var r=null;return F.uint8array?r=new Uint8Array(e.length):r=new Array(e.length),se(e,r)}d.newBlob=function(e,r){d.checkSupport("blob");try{return new Blob([e],{type:r})}catch{try{var t=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,i=new t;return i.append(e),i.getBlob(r)}catch{throw new Error("Bug : can't construct the Blob.")}}};function Q(e){return e}function se(e,r){for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)&255;return r}var ne={stringifyByChunk:function(e,r,t){var i=[],n=0,s=e.length;if(s<=t)return String.fromCharCode.apply(null,e);for(;n<s;)r==="array"||r==="nodebuffer"?i.push(String.fromCharCode.apply(null,e.slice(n,Math.min(n+t,s)))):i.push(String.fromCharCode.apply(null,e.subarray(n,Math.min(n+t,s)))),n+=t;return i.join("")},stringifyByChar:function(e){for(var r="",t=0;t<e.length;t++)r+=String.fromCharCode(e[t]);return r},applyCanBeUsed:{uint8array:function(){try{return F.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return F.nodebuffer&&String.fromCharCode.apply(null,Z.allocBuffer(1)).length===1}catch{return!1}}()}};function $(e){var r=65536,t=d.getTypeOf(e),i=!0;if(t==="uint8array"?i=ne.applyCanBeUsed.uint8array:t==="nodebuffer"&&(i=ne.applyCanBeUsed.nodebuffer),i)for(;r>1;)try{return ne.stringifyByChunk(e,t,r)}catch{r=Math.floor(r/2)}return ne.stringifyByChar(e)}d.applyFromCharCode=$;function ae(e,r){for(var t=0;t<e.length;t++)r[t]=e[t];return r}var T={};T.string={string:Q,array:function(e){return se(e,new Array(e.length))},arraybuffer:function(e){return T.string.uint8array(e).buffer},uint8array:function(e){return se(e,new Uint8Array(e.length))},nodebuffer:function(e){return se(e,Z.allocBuffer(e.length))}};T.array={string:$,array:Q,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return Z.newBufferFrom(e)}};T.arraybuffer={string:function(e){return $(new Uint8Array(e))},array:function(e){return ae(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:Q,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return Z.newBufferFrom(new Uint8Array(e))}};T.uint8array={string:$,array:function(e){return ae(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:Q,nodebuffer:function(e){return Z.newBufferFrom(e)}};T.nodebuffer={string:$,array:function(e){return ae(e,new Array(e.length))},arraybuffer:function(e){return T.nodebuffer.uint8array(e).buffer},uint8array:function(e){return ae(e,new Uint8Array(e.length))},nodebuffer:Q};d.transformTo=function(e,r){if(r||(r=""),!e)return r;d.checkSupport(e);var t=d.getTypeOf(r),i=T[t][e](r);return i};d.getTypeOf=function(e){if(typeof e=="string")return"string";if(Object.prototype.toString.call(e)==="[object Array]")return"array";if(F.nodebuffer&&Z.isBuffer(e))return"nodebuffer";if(F.uint8array&&e instanceof Uint8Array)return"uint8array";if(F.arraybuffer&&e instanceof ArrayBuffer)return"arraybuffer"};d.checkSupport=function(e){var r=F[e.toLowerCase()];if(!r)throw new Error(e+" is not supported by this platform")};d.MAX_VALUE_16BITS=65535;d.MAX_VALUE_32BITS=-1;d.pretty=function(e){var r="",t,i;for(i=0;i<(e||"").length;i++)t=e.charCodeAt(i),r+="\\x"+(t<16?"0":"")+t.toString(16).toUpperCase();return r};d.delay=function(e,r,t){Yt(function(){e.apply(t||null,r||[])})};d.inherits=function(e,r){var t=function(){};t.prototype=r.prototype,e.prototype=new t};d.extend=function(){var e={},r,t;for(r=0;r<arguments.length;r++)for(t in arguments[r])arguments[r].hasOwnProperty(t)&&typeof e[t]>"u"&&(e[t]=arguments[r][t]);return e};d.prepareContent=function(e,r,t,i,n){var s=Re.Promise.resolve(r).then(function(a){var o=F.blob&&(a instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(a))!==-1);return o&&typeof FileReader<"u"?new Re.Promise(function(u,h){var p=new FileReader;p.onload=function(m){u(m.target.result)},p.onerror=function(m){h(m.target.error)},p.readAsArrayBuffer(a)}):a});return s.then(function(a){var o=d.getTypeOf(a);return o?(o==="arraybuffer"?a=d.transformTo("uint8array",a):o==="string"&&(n?a=Ht.decode(a):t&&i!==!0&&(a=Xt(a))),a):Re.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}});var y=f((ln,mr)=>{"use strict";function pr(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}pr.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return this.isFinished?!1:(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,r){return this._listeners[e].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,r){if(this._listeners[e])for(var t=0;t<this._listeners[e].length;t++)this._listeners[e][t].call(this,r)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var r=this;return e.on("data",function(t){r.processChunk(t)}),e.on("end",function(){r.end()}),e.on("error",function(t){r.error(t)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,r){return this.extraStreamInfo[e]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)!this.extraStreamInfo.hasOwnProperty(e)||(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}};mr.exports=pr});var P=f(D=>{"use strict";var M=l(),B=k(),Vt=J(),oe=y(),ee=new Array(256);for(I=0;I<256;I++)ee[I]=I>=252?6:I>=248?5:I>=240?4:I>=224?3:I>=192?2:1;var I;ee[254]=ee[254]=1;var Gt=function(e){var r,t,i,n,s,a=e.length,o=0;for(n=0;n<a;n++)t=e.charCodeAt(n),(t&64512)===55296&&n+1<a&&(i=e.charCodeAt(n+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),n++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(B.uint8array?r=new Uint8Array(o):r=new Array(o),s=0,n=0;s<o;n++)t=e.charCodeAt(n),(t&64512)===55296&&n+1<a&&(i=e.charCodeAt(n+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),n++)),t<128?r[s++]=t:t<2048?(r[s++]=192|t>>>6,r[s++]=128|t&63):t<65536?(r[s++]=224|t>>>12,r[s++]=128|t>>>6&63,r[s++]=128|t&63):(r[s++]=240|t>>>18,r[s++]=128|t>>>12&63,r[s++]=128|t>>>6&63,r[s++]=128|t&63);return r},Kt=function(e,r){var t;for(r=r||e.length,r>e.length&&(r=e.length),t=r-1;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?r:t+ee[e[t]]>r?t:r},Jt=function(e){var r,t,i,n,s,a=e.length,o=new Array(a*2);for(i=0,t=0;t<a;){if(n=e[t++],n<128){o[i++]=n;continue}if(s=ee[n],s>4){o[i++]=65533,t+=s-1;continue}for(n&=s===2?31:s===3?15:7;s>1&&t<a;)n=n<<6|e[t++]&63,s--;if(s>1){o[i++]=65533;continue}n<65536?o[i++]=n:(n-=65536,o[i++]=55296|n>>10&1023,o[i++]=56320|n&1023)}return o.length!==i&&(o.subarray?o=o.subarray(0,i):o.length=i),M.applyFromCharCode(o)};D.utf8encode=function(r){return B.nodebuffer?Vt.newBufferFrom(r,"utf-8"):Gt(r)};D.utf8decode=function(r){return B.nodebuffer?M.transformTo("nodebuffer",r).toString("utf-8"):(r=M.transformTo(B.uint8array?"uint8array":"array",r),Jt(r))};function ue(){oe.call(this,"utf-8 decode"),this.leftOver=null}M.inherits(ue,oe);ue.prototype.processChunk=function(e){var r=M.transformTo(B.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(B.uint8array){var t=r;r=new Uint8Array(t.length+this.leftOver.length),r.set(this.leftOver,0),r.set(t,this.leftOver.length)}else r=this.leftOver.concat(r);this.leftOver=null}var i=Kt(r),n=r;i!==r.length&&(B.uint8array?(n=r.subarray(0,i),this.leftOver=r.subarray(i,r.length)):(n=r.slice(0,i),this.leftOver=r.slice(i,r.length))),this.push({data:D.utf8decode(n),meta:e.meta})};ue.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:D.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)};D.Utf8DecodeWorker=ue;function Be(){oe.call(this,"utf-8 encode")}M.inherits(Be,oe);Be.prototype.processChunk=function(e){this.push({data:D.utf8encode(e.data),meta:e.meta})};D.Utf8EncodeWorker=Be});var xr=f((pn,gr)=>{"use strict";var vr=y(),yr=l();function Pe(e){vr.call(this,"ConvertWorker to "+e),this.destType=e}yr.inherits(Pe,vr);Pe.prototype.processChunk=function(e){this.push({data:yr.transformTo(this.destType,e.data),meta:e.meta})};gr.exports=Pe});var wr=f((mn,Sr)=>{"use strict";var Cr=__readable_stream$Readable,Qt=l();Qt.inherits(qe,Cr);function qe(e,r,t){Cr.call(this,r),this._helper=e;var i=this;e.on("data",function(n,s){i.push(n)||i._helper.pause(),t&&t(s)}).on("error",function(n){i.emit("error",n)}).on("end",function(){i.push(null)})}qe.prototype._read=function(){this._helper.resume()};Sr.exports=qe});var ze=f((vn,Ar)=>{"use strict";var q=l(),$t=xr(),ei=y(),ri=Te(),ti=k(),ii=W(),Er=null;if(ti.nodestream)try{Er=wr()}catch{}function ni(e,r,t){switch(e){case"blob":return q.newBlob(q.transformTo("arraybuffer",r),t);case"base64":return ri.encode(r);default:return q.transformTo(e,r)}}function si(e,r){var t,i=0,n=null,s=0;for(t=0;t<r.length;t++)s+=r[t].length;switch(e){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(n=new Uint8Array(s),t=0;t<r.length;t++)n.set(r[t],i),i+=r[t].length;return n;case"nodebuffer":return __Buffer$.concat(r);default:throw new Error("concat : unsupported type '"+e+"'")}}function ai(e,r){return new ii.Promise(function(t,i){var n=[],s=e._internalType,a=e._outputType,o=e._mimeType;e.on("data",function(u,h){n.push(u),r&&r(h)}).on("error",function(u){n=[],i(u)}).on("end",function(){try{var u=ni(a,si(s,n),o);t(u)}catch(h){i(h)}n=[]}).resume()})}function br(e,r,t){var i=r;switch(r){case"blob":case"arraybuffer":i="uint8array";break;case"base64":i="string";break}try{this._internalType=i,this._outputType=r,this._mimeType=t,q.checkSupport(i),this._worker=e.pipe(new $t(i)),e.lock()}catch(n){this._worker=new ei("error"),this._worker.error(n)}}br.prototype={accumulate:function(e){return ai(this,e)},on:function(e,r){var t=this;return e==="data"?this._worker.on(e,function(i){r.call(t,i.data,i.meta)}):this._worker.on(e,function(){q.delay(r,arguments,t)}),this},resume:function(){return q.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(q.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new Er(this,{objectMode:this._outputType!=="nodebuffer"},e)}};Ar.exports=br});var Le=f(S=>{"use strict";S.base64=!1;S.binary=!1;S.dir=!1;S.createFolders=!0;S.date=null;S.compression=null;S.compressionOptions=null;S.comment=null;S.unixPermissions=null;S.dosPermissions=null});var Ue=f((gn,_r)=>{"use strict";var fe=l(),he=y(),oi=16*1024;function j(e){he.call(this,"DataWorker");var r=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(t){r.dataIsReady=!0,r.data=t,r.max=t&&t.length||0,r.type=fe.getTypeOf(t),r.isPaused||r._tickAndRepeat()},function(t){r.error(t)})}fe.inherits(j,he);j.prototype.cleanUp=function(){he.prototype.cleanUp.call(this),this.data=null};j.prototype.resume=function(){return he.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,fe.delay(this._tickAndRepeat,[],this)),!0):!1};j.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(fe.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))};j.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=oi,r=null,t=Math.min(this.max,this.index+e);if(this.index>=this.max)return this.end();switch(this.type){case"string":r=this.data.substring(this.index,t);break;case"uint8array":r=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":r=this.data.slice(this.index,t);break}return this.index=t,this.push({data:r,meta:{percent:this.max?this.index/this.max*100:0}})};_r.exports=j});var Ze=f((xn,kr)=>{"use strict";var ui=l(),Ne=y();function We(e){Ne.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}ui.inherits(We,Ne);We.prototype.processChunk=function(e){if(e){var r=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=r+e.data.length}Ne.prototype.processChunk.call(this,e)};kr.exports=We});var ce=f((Cn,Or)=>{"use strict";var fi=l();function hi(){for(var e,r=[],t=0;t<256;t++){e=t;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;r[t]=e}return r}var Ir=hi();function ci(e,r,t,i){var n=Ir,s=i+t;e=e^-1;for(var a=i;a<s;a++)e=e>>>8^n[(e^r[a])&255];return e^-1}function li(e,r,t,i){var n=Ir,s=i+t;e=e^-1;for(var a=i;a<s;a++)e=e>>>8^n[(e^r.charCodeAt(a))&255];return e^-1}Or.exports=function(r,t){if(typeof r>"u"||!r.length)return 0;var i=fi.getTypeOf(r)!=="string";return i?ci(t|0,r,r.length,0):li(t|0,r,r.length,0)}});var je=f((Sn,Tr)=>{"use strict";var Fr=y(),di=ce(),pi=l();function Me(){Fr.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}pi.inherits(Me,Fr);Me.prototype.processChunk=function(e){this.streamInfo.crc32=di(e.data,this.streamInfo.crc32||0),this.push(e)};Tr.exports=Me});var de=f((wn,Br)=>{"use strict";var Dr=W(),Rr=Ue(),le=Ze(),mi=je(),le=Ze();function He(e,r,t,i,n){this.compressedSize=e,this.uncompressedSize=r,this.crc32=t,this.compression=i,this.compressedContent=n}He.prototype={getContentWorker:function(){var e=new Rr(Dr.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new le("data_length")),r=this;return e.on("end",function(){if(this.streamInfo.data_length!==r.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new Rr(Dr.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}};He.createWorkerFrom=function(e,r,t){return e.pipe(new mi).pipe(new le("uncompressedSize")).pipe(r.compressWorker(t)).pipe(new le("compressedSize")).withStreamInfo("compression",r)};Br.exports=He});var Lr=f((En,zr)=>{"use strict";var vi=ze(),yi=Ue(),Ye=P(),Xe=de(),Pr=y(),Ve=function(e,r,t){this.name=e,this.dir=t.dir,this.date=t.date,this.comment=t.comment,this.unixPermissions=t.unixPermissions,this.dosPermissions=t.dosPermissions,this._data=r,this._dataBinary=t.binary,this.options={compression:t.compression,compressionOptions:t.compressionOptions}};Ve.prototype={internalStream:function(e){var r=null,t="string";try{if(!e)throw new Error("No output type specified.");t=e.toLowerCase();var i=t==="string"||t==="text";(t==="binarystring"||t==="text")&&(t="string"),r=this._decompressWorker();var n=!this._dataBinary;n&&!i&&(r=r.pipe(new Ye.Utf8EncodeWorker)),!n&&i&&(r=r.pipe(new Ye.Utf8DecodeWorker))}catch(s){r=new Pr("error"),r.error(s)}return new vi(r,t,"")},async:function(e,r){return this.internalStream(e).accumulate(r)},nodeStream:function(e,r){return this.internalStream(e||"nodebuffer").toNodejsStream(r)},_compressWorker:function(e,r){if(this._data instanceof Xe&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var t=this._decompressWorker();return this._dataBinary||(t=t.pipe(new Ye.Utf8EncodeWorker)),Xe.createWorkerFrom(t,e,r)},_decompressWorker:function(){return this._data instanceof Xe?this._data.getContentWorker():this._data instanceof Pr?this._data:new yi(this._data)}};var qr=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],gi=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")};for(pe=0;pe<qr.length;pe++)Ve.prototype[qr[pe]]=gi;var pe;zr.exports=Ve});var Nr=f(ve=>{"use strict";var xi=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",Ci=__pako$,Ur=l(),me=y(),Si=xi?"uint8array":"array";ve.magic="\b\0";function z(e,r){me.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=r,this.meta={}}Ur.inherits(z,me);z.prototype.processChunk=function(e){this.meta=e.meta,this._pako===null&&this._createPako(),this._pako.push(Ur.transformTo(Si,e.data),!1)};z.prototype.flush=function(){me.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)};z.prototype.cleanUp=function(){me.prototype.cleanUp.call(this),this._pako=null};z.prototype._createPako=function(){this._pako=new Ci[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(r){e.push({data:r,meta:e.meta})}};ve.compressWorker=function(e){return new z("Deflate",e)};ve.uncompressWorker=function(){return new z("Inflate",{})}});var Ke=f(Ge=>{"use strict";var Wr=y();Ge.STORE={magic:"\0\0",compressWorker:function(e){return new Wr("STORE compression")},uncompressWorker:function(){return new Wr("STORE decompression")}};Ge.DEFLATE=Nr()});var Je=f(L=>{"use strict";L.LOCAL_FILE_HEADER="PK";L.CENTRAL_FILE_HEADER="PK";L.CENTRAL_DIRECTORY_END="PK";L.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07";L.ZIP64_CENTRAL_DIRECTORY_END="PK";L.DATA_DESCRIPTOR="PK\x07\b"});var Hr=f((kn,jr)=>{"use strict";var H=l(),Y=y(),Qe=P(),Zr=ce(),ye=Je(),c=function(e,r){var t="",i;for(i=0;i<r;i++)t+=String.fromCharCode(e&255),e=e>>>8;return t},wi=function(e,r){var t=e;return e||(t=r?16893:33204),(t&65535)<<16},Ei=function(e,r){return(e||0)&63},Mr=function(e,r,t,i,n,s){var a=e.file,o=e.compression,u=s!==Qe.utf8encode,h=H.transformTo("string",s(a.name)),p=H.transformTo("string",Qe.utf8encode(a.name)),m=a.comment,g=H.transformTo("string",s(m)),or=H.transformTo("string",Qe.utf8encode(m)),ur=p.length!==a.name.length,fr=or.length!==m.length,b,A,G="",Ee="",be="",Ae=a.dir,U=a.date,N={crc32:0,compressedSize:0,uncompressedSize:0};(!r||t)&&(N.crc32=e.crc32,N.compressedSize=e.compressedSize,N.uncompressedSize=e.uncompressedSize);var _e=0;r&&(_e|=8),!u&&(ur||fr)&&(_e|=2048);var ie=0,ke=0;Ae&&(ie|=16),n==="UNIX"?(ke=798,ie|=wi(a.unixPermissions,Ae)):(ke=20,ie|=Ei(a.dosPermissions,Ae)),b=U.getUTCHours(),b=b<<6,b=b|U.getUTCMinutes(),b=b<<5,b=b|U.getUTCSeconds()/2,A=U.getUTCFullYear()-1980,A=A<<4,A=A|U.getUTCMonth()+1,A=A<<5,A=A|U.getUTCDate(),ur&&(Ee=c(1,1)+c(Zr(h),4)+p,G+="up"+c(Ee.length,2)+Ee),fr&&(be=c(1,1)+c(Zr(g),4)+or,G+="uc"+c(be.length,2)+be);var x="";x+=`
\0`,x+=c(_e,2),x+=o.magic,x+=c(b,2),x+=c(A,2),x+=c(N.crc32,4),x+=c(N.compressedSize,4),x+=c(N.uncompressedSize,4),x+=c(h.length,2),x+=c(G.length,2);var Bt=ye.LOCAL_FILE_HEADER+x+h+G,Pt=ye.CENTRAL_FILE_HEADER+c(ke,2)+x+c(g.length,2)+"\0\0\0\0"+c(ie,4)+c(i,4)+h+G+g;return{fileRecord:Bt,dirRecord:Pt}},bi=function(e,r,t,i,n){var s="",a=H.transformTo("string",n(i));return s=ye.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(e,2)+c(e,2)+c(r,4)+c(t,4)+c(a.length,2)+a,s},Ai=function(e){var r="";return r=ye.DATA_DESCRIPTOR+c(e.crc32,4)+c(e.compressedSize,4)+c(e.uncompressedSize,4),r};function w(e,r,t,i){Y.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=r,this.zipPlatform=t,this.encodeFileName=i,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}H.inherits(w,Y);w.prototype.push=function(e){var r=e.meta.percent||0,t=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,Y.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:t?(r+100*(t-i-1))/t:100}}))};w.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var r=this.streamFiles&&!e.file.dir;if(r){var t=Mr(e,r,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:t.fileRecord,meta:{percent:0}})}else this.accumulate=!0};w.prototype.closedSource=function(e){this.accumulate=!1;var r=this.streamFiles&&!e.file.dir,t=Mr(e,r,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(t.dirRecord),r)this.push({data:Ai(e),meta:{percent:100}});else for(this.push({data:t.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null};w.prototype.flush=function(){for(var e=this.bytesWritten,r=0;r<this.dirRecords.length;r++)this.push({data:this.dirRecords[r],meta:{percent:100}});var t=this.bytesWritten-e,i=bi(this.dirRecords.length,t,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})};w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()};w.prototype.registerPrevious=function(e){this._sources.push(e);var r=this;return e.on("data",function(t){r.processChunk(t)}),e.on("end",function(){r.closedSource(r.previous.streamInfo),r._sources.length?r.prepareNextSource():r.end()}),e.on("error",function(t){r.error(t)}),this};w.prototype.resume=function(){if(!Y.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0};w.prototype.error=function(e){var r=this._sources;if(!Y.prototype.error.call(this,e))return!1;for(var t=0;t<r.length;t++)try{r[t].error(e)}catch{}return!0};w.prototype.lock=function(){Y.prototype.lock.call(this);for(var e=this._sources,r=0;r<e.length;r++)e[r].lock()};jr.exports=w});var Xr=f(Yr=>{"use strict";var _i=Ke(),ki=Hr(),Ii=function(e,r){var t=e||r,i=_i[t];if(!i)throw new Error(t+" is not a valid compression method !");return i};Yr.generateWorker=function(e,r,t){var i=new ki(r.streamFiles,t,r.platform,r.encodeFileName),n=0;try{e.forEach(function(s,a){n++;var o=Ii(a.options.compression,r.compression),u=a.options.compressionOptions||r.compressionOptions||{},h=a.dir,p=a.date;a._compressWorker(o,u).withStreamInfo("file",{name:s,dir:h,date:p,comment:a.comment||"",unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions}).pipe(i)}),i.entriesCount=n}catch(s){i.error(s)}return i}});var Gr=f((On,Vr)=>{"use strict";var Oi=l(),ge=y();function re(e,r){ge.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(r)}Oi.inherits(re,ge);re.prototype._bindStream=function(e){var r=this;this._stream=e,e.pause(),e.on("data",function(t){r.push({data:t,meta:{percent:0}})}).on("error",function(t){r.isPaused?this.generatedError=t:r.error(t)}).on("end",function(){r.isPaused?r._upstreamEnded=!0:r.end()})};re.prototype.pause=function(){return ge.prototype.pause.call(this)?(this._stream.pause(),!0):!1};re.prototype.resume=function(){return ge.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1};Vr.exports=re});var st=f((Fn,nt)=>{"use strict";var Fi=P(),te=l(),$r=y(),Ti=ze(),et=Le(),Kr=de(),Di=Lr(),Ri=Xr(),Jr=J(),Bi=Gr(),rt=function(e,r,t){var i=te.getTypeOf(r),n,s=te.extend(t||{},et);s.date=s.date||new Date,s.compression!==null&&(s.compression=s.compression.toUpperCase()),typeof s.unixPermissions=="string"&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&s.unixPermissions&16384&&(s.dir=!0),s.dosPermissions&&s.dosPermissions&16&&(s.dir=!0),s.dir&&(e=tt(e)),s.createFolders&&(n=Pi(e))&&it.call(this,n,!0);var a=i==="string"&&s.binary===!1&&s.base64===!1;(!t||typeof t.binary>"u")&&(s.binary=!a);var o=r instanceof Kr&&r.uncompressedSize===0;(o||s.dir||!r||r.length===0)&&(s.base64=!1,s.binary=!0,r="",s.compression="STORE",i="string");var u=null;r instanceof Kr||r instanceof $r?u=r:Jr.isNode&&Jr.isStream(r)?u=new Bi(e,r):u=te.prepareContent(e,r,s.binary,s.optimizedBinaryString,s.base64);var h=new Di(e,u,s);this.files[e]=h},Pi=function(e){e.slice(-1)==="/"&&(e=e.substring(0,e.length-1));var r=e.lastIndexOf("/");return r>0?e.substring(0,r):""},tt=function(e){return e.slice(-1)!=="/"&&(e+="/"),e},it=function(e,r){return r=typeof r<"u"?r:et.createFolders,e=tt(e),this.files[e]||rt.call(this,e,null,{dir:!0,createFolders:r}),this.files[e]};function Qr(e){return Object.prototype.toString.call(e)==="[object RegExp]"}var qi={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var r,t,i;for(r in this.files)!this.files.hasOwnProperty(r)||(i=this.files[r],t=r.slice(this.root.length,r.length),t&&r.slice(0,this.root.length)===this.root&&e(t,i))},filter:function(e){var r=[];return this.forEach(function(t,i){e(t,i)&&r.push(i)}),r},file:function(e,r,t){if(arguments.length===1)if(Qr(e)){var i=e;return this.filter(function(s,a){return!a.dir&&i.test(s)})}else{var n=this.files[this.root+e];return n&&!n.dir?n:null}else e=this.root+e,rt.call(this,e,r,t);return this},folder:function(e){if(!e)return this;if(Qr(e))return this.filter(function(n,s){return s.dir&&e.test(n)});var r=this.root+e,t=it.call(this,r),i=this.clone();return i.root=t.name,i},remove:function(e){e=this.root+e;var r=this.files[e];if(r||(e.slice(-1)!=="/"&&(e+="/"),r=this.files[e]),r&&!r.dir)delete this.files[e];else for(var t=this.filter(function(n,s){return s.name.slice(0,e.length)===e}),i=0;i<t.length;i++)delete this.files[t[i].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var r,t={};try{if(t=te.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:Fi.utf8encode}),t.type=t.type.toLowerCase(),t.compression=t.compression.toUpperCase(),t.type==="binarystring"&&(t.type="string"),!t.type)throw new Error("No output type specified.");te.checkSupport(t.type),(t.platform==="darwin"||t.platform==="freebsd"||t.platform==="linux"||t.platform==="sunos")&&(t.platform="UNIX"),t.platform==="win32"&&(t.platform="DOS");var i=t.comment||this.comment||"";r=Ri.generateWorker(this,t,i)}catch(n){r=new $r("error"),r.error(n)}return new Ti(r,t.type||"string",t.mimeType)},generateAsync:function(e,r){return this.generateInternalStream(e).accumulate(r)},generateNodeStream:function(e,r){return e=e||{},e.type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(r)}};nt.exports=qi});var $e=f((Tn,ot)=>{"use strict";var zi=l();function at(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}at.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var r=0,t;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return zi.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC((e>>25&127)+1980,(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(e&31)<<1))}};ot.exports=at});var er=f((Dn,ft)=>{"use strict";var ut=$e(),Li=l();function X(e){ut.call(this,e);for(var r=0;r<this.data.length;r++)e[r]=e[r]&255}Li.inherits(X,ut);X.prototype.byteAt=function(e){return this.data[this.zero+e]};X.prototype.lastIndexOfSignature=function(e){for(var r=e.charCodeAt(0),t=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),s=this.length-4;s>=0;--s)if(this.data[s]===r&&this.data[s+1]===t&&this.data[s+2]===i&&this.data[s+3]===n)return s-this.zero;return-1};X.prototype.readAndCheckSignature=function(e){var r=e.charCodeAt(0),t=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),s=this.readData(4);return r===s[0]&&t===s[1]&&i===s[2]&&n===s[3]};X.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var r=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,r};ft.exports=X});var lt=f((Rn,ct)=>{"use strict";var ht=$e(),Ui=l();function V(e){ht.call(this,e)}Ui.inherits(V,ht);V.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)};V.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero};V.prototype.readAndCheckSignature=function(e){var r=this.readData(4);return e===r};V.prototype.readData=function(e){this.checkOffset(e);var r=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,r};ct.exports=V});var tr=f((Bn,pt)=>{"use strict";var dt=er(),Ni=l();function rr(e){dt.call(this,e)}Ni.inherits(rr,dt);rr.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var r=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,r};pt.exports=rr});var yt=f((Pn,vt)=>{"use strict";var mt=tr(),Wi=l();function ir(e){mt.call(this,e)}Wi.inherits(ir,mt);ir.prototype.readData=function(e){this.checkOffset(e);var r=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,r};vt.exports=ir});var nr=f((qn,xt)=>{"use strict";var xe=l(),gt=k(),Zi=er(),Mi=lt(),ji=yt(),Hi=tr();xt.exports=function(e){var r=xe.getTypeOf(e);return xe.checkSupport(r),r==="string"&&!gt.uint8array?new Mi(e):r==="nodebuffer"?new ji(e):gt.uint8array?new Hi(xe.transformTo("uint8array",e)):new Zi(xe.transformTo("array",e))}});var Et=f((zn,wt)=>{"use strict";var sr=nr(),R=l(),Yi=de(),Ct=ce(),Ce=P(),Se=Ke(),Xi=k(),Vi=0,Gi=3,Ki=function(e){for(var r in Se)if(!!Se.hasOwnProperty(r)&&Se[r].magic===e)return Se[r];return null};function St(e,r){this.options=e,this.loadOptions=r}St.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(e){var r,t;if(e.skip(22),this.fileNameLength=e.readInt(2),t=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(t),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(r=Ki(this.compressionMethod),r===null)throw new Error("Corrupted zip : compression "+R.pretty(this.compressionMethod)+" unknown (inner file : "+R.transformTo("string",this.fileName)+")");this.decompressed=new Yi(this.compressedSize,this.uncompressedSize,this.crc32,r,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var r=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(r),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),e===Vi&&(this.dosPermissions=this.externalFileAttributes&63),e===Gi&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(e){if(!!this.extraFields[1]){var r=sr(this.extraFields[1].value);this.uncompressedSize===R.MAX_VALUE_32BITS&&(this.uncompressedSize=r.readInt(8)),this.compressedSize===R.MAX_VALUE_32BITS&&(this.compressedSize=r.readInt(8)),this.localHeaderOffset===R.MAX_VALUE_32BITS&&(this.localHeaderOffset=r.readInt(8)),this.diskNumberStart===R.MAX_VALUE_32BITS&&(this.diskNumberStart=r.readInt(4))}},readExtraFields:function(e){var r=e.index+this.extraFieldsLength,t,i,n;for(this.extraFields||(this.extraFields={});e.index+4<r;)t=e.readInt(2),i=e.readInt(2),n=e.readData(i),this.extraFields[t]={id:t,length:i,value:n};e.setIndex(r)},handleUTF8:function(){var e=Xi.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=Ce.utf8decode(this.fileName),this.fileCommentStr=Ce.utf8decode(this.fileComment);else{var r=this.findExtraFieldUnicodePath();if(r!==null)this.fileNameStr=r;else{var t=R.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(t)}var i=this.findExtraFieldUnicodeComment();if(i!==null)this.fileCommentStr=i;else{var n=R.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(n)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var r=sr(e.value);return r.readInt(1)!==1||Ct(this.fileName)!==r.readInt(4)?null:Ce.utf8decode(r.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var r=sr(e.value);return r.readInt(1)!==1||Ct(this.fileComment)!==r.readInt(4)?null:Ce.utf8decode(r.readData(e.length-5))}return null}};wt.exports=St});var _t=f((Un,At)=>{"use strict";var Ji=nr(),O=l(),E=Je(),Qi=Et(),Ln=P(),$i=k();function bt(e){this.files=[],this.loadOptions=e}bt.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var r=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+O.pretty(r)+", expected "+O.pretty(e)+")")}},isSignature:function(e,r){var t=this.reader.index;this.reader.setIndex(e);var i=this.reader.readString(4),n=i===r;return this.reader.setIndex(t),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),r=$i.uint8array?"uint8array":"array",t=O.transformTo(r,e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e=this.zip64EndOfCentralSize-44,r=0,t,i,n;r<e;)t=this.reader.readInt(2),i=this.reader.readInt(4),n=this.reader.readData(i),this.zip64ExtensibleData[t]={id:t,length:i,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,r;for(e=0;e<this.files.length;e++)r=this.files[e],this.reader.setIndex(r.localHeaderOffset),this.checkSignature(E.LOCAL_FILE_HEADER),r.readLocalPart(this.reader),r.handleUTF8(),r.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(E.CENTRAL_FILE_HEADER);)e=new Qi({zip64:this.zip64},this.loadOptions),e.readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(E.CENTRAL_DIRECTORY_END);if(e<0){var r=!this.isSignature(0,E.LOCAL_FILE_HEADER);throw r?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(e);var t=e;if(this.checkSignature(E.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===O.MAX_VALUE_16BITS||this.diskWithCentralDirStart===O.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===O.MAX_VALUE_16BITS||this.centralDirRecords===O.MAX_VALUE_16BITS||this.centralDirSize===O.MAX_VALUE_32BITS||this.centralDirOffset===O.MAX_VALUE_32BITS){if(this.zip64=!0,e=this.reader.lastIndexOfSignature(E.ZIP64_CENTRAL_DIRECTORY_LOCATOR),e<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(E.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,E.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(E.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(E.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var n=t-i;if(n>0)this.isSignature(t,E.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=Ji(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};At.exports=bt});var Ot=f((Nn,It)=>{"use strict";var ar=l(),we=W(),en=P(),ar=l(),rn=_t(),tn=je(),kt=J();function nn(e){return new we.Promise(function(r,t){var i=e.decompressed.getContentWorker().pipe(new tn);i.on("error",function(n){t(n)}).on("end",function(){i.streamInfo.crc32!==e.decompressed.crc32?t(new Error("Corrupted zip : CRC32 mismatch")):r()}).resume()})}It.exports=function(e,r){var t=this;return r=ar.extend(r||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:en.utf8decode}),kt.isNode&&kt.isStream(e)?we.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):ar.prepareContent("the loaded zip file",e,!0,r.optimizedBinaryString,r.base64).then(function(i){var n=new rn(r);return n.load(i),n}).then(function(n){var s=[we.Promise.resolve(n)],a=n.files;if(r.checkCRC32)for(var o=0;o<a.length;o++)s.push(nn(a[o]));return we.Promise.all(s)}).then(function(n){for(var s=n.shift(),a=s.files,o=0;o<a.length;o++){var u=a[o];t.file(u.fileNameStr,u.decompressed,{binary:!0,optimizedBinaryString:!0,date:u.date,dir:u.dir,comment:u.fileCommentStr.length?u.fileCommentStr:null,unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions,createFolders:r.createFolders})}return s.zipComment.length&&(t.comment=s.zipComment),t})}});var Tt=f((Wn,Ft)=>{"use strict";function C(){if(!(this instanceof C))return new C;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new C;for(var r in this)typeof this[r]!="function"&&(e[r]=this[r]);return e}}C.prototype=st();C.prototype.loadAsync=Ot();C.support=k();C.defaults=Le();C.version="3.5.0";C.loadAsync=function(e,r){return new C().loadAsync(e,r)};C.external=W();Ft.exports=C});var Rt=Zt(Tt()),{prototype:Zn,support:Mn,defaults:jn,version:Hn,loadAsync:Yn,external:Xn}=Rt,{default:Dt,...sn}=Rt,Vn=Dt!==void 0?Dt:sn;export{Vn as default,jn as defaults,Xn as external,Yn as loadAsync,Zn as prototype,Mn as support,Hn as version};
