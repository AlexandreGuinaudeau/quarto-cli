/* esm.sh - esbuild bundle(readable-stream@2.3.7) deno production */
import __Process$ from "https://deno.land/std@0.165.0/node/process.ts";var __global$ = globalThis || (typeof window !== "undefined" ? window : self);var __setImmediate$ = (cb, ...args) => setTimeout(cb, 0, ...args);import __events$ from "https://deno.land/std@0.165.0/node/events.ts";import __isarray$ from "/v99/isarray@1.0.0/deno/isarray.js";import __inherits$ from "/v99/inherits@2.0.4/deno/inherits.js";import __util_deprecate$ from "/v99/util-deprecate@1.0.2/deno/util-deprecate.js";import __string_decoder$ from "https://deno.land/std@0.165.0/node/string_decoder.ts";import __util$ from "https://deno.land/std@0.165.0/node/util.ts";import { Buffer as __safe_buffer$Buffer } from "/v99/safe-buffer@5.1.2/deno/safe-buffer.js";import __process_nextick_args$ from "/v99/process-nextick-args@2.0.1/deno/process-nextick-args.js";import __core_util_is$ from "/v99/core-util-is@1.0.3/deno/core-util-is.js";var Ge=Object.create;var ae=Object.defineProperty;var Je=Object.getOwnPropertyDescriptor;var Qe=Object.getOwnPropertyNames;var Ve=Object.getPrototypeOf,Ye=Object.prototype.hasOwnProperty;var o=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var p=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Ze=(e,r,t,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of Qe(r))!Ye.call(e,n)&&n!==t&&ae(e,n,{get:()=>r[n],enumerable:!(i=Je(r,n))||i.enumerable});return e};var $e=(e,r,t)=>(t=e!=null?Ge(Ve(e)):{},Ze(r||!e||!e.__esModule?ae(t,"default",{value:e,enumerable:!0}):t,e));var N=p((Jr,fe)=>{fe.exports=__events$.EventEmitter});var oe=p((Qr,K)=>{"use strict";function er(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var le=__safe_buffer$Buffer,E=__util$;function rr(e,r,t){e.copy(r,t)}K.exports=function(){function e(){er(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(t){var i={data:t,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length},e.prototype.unshift=function(t){var i={data:t,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length},e.prototype.shift=function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(t){if(this.length===0)return"";for(var i=this.head,n=""+i.data;i=i.next;)n+=t+i.data;return n},e.prototype.concat=function(t){if(this.length===0)return le.alloc(0);if(this.length===1)return this.head.data;for(var i=le.allocUnsafe(t>>>0),n=this.head,a=0;n;)rr(n.data,i,a),a+=n.data.length,n=n.next;return i},e}();E&&E.inspect&&E.inspect.custom&&(K.exports.prototype[E.inspect.custom]=function(){var e=E.inspect({length:this.length});return this.constructor.name+" "+e})});var X=p((Vr,de)=>{"use strict";var ue=__process_nextick_args$;function tr(e,r){var t=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(r?r(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&ue.nextTick(se,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(a){!r&&a?(ue.nextTick(se,t,a),t._writableState&&(t._writableState.errorEmitted=!0)):r&&r(a)}),this)}function ir(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function se(e,r){e.emit("error",r)}de.exports={destroy:tr,undestroy:ir}});var G=p((Yr,ve)=>{"use strict";var y=__process_nextick_args$;ve.exports=s;function ce(e){var r=this;this.next=null,this.entry=null,this.finish=function(){Sr(r,e)}}var nr=!__Process$.browser&&["v0.10","v0.9."].indexOf(__Process$.version.slice(0,5))>-1?__setImmediate$:y.nextTick,S;s.WritableState=j;var pe=Object.create(__core_util_is$);pe.inherits=__inherits$;var ar={deprecate:__util_deprecate$},be=N(),B=__safe_buffer$Buffer,fr=__global$.Uint8Array||function(){};function lr(e){return B.from(e)}function or(e){return B.isBuffer(e)||e instanceof fr}var ge=X();pe.inherits(s,be);function ur(){}function j(e,r){S=S||v(),e=e||{};var t=r instanceof S;this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,n=e.writableHighWaterMark,a=this.objectMode?16:16*1024;i||i===0?this.highWaterMark=i:t&&(n||n===0)?this.highWaterMark=n:this.highWaterMark=a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=e.decodeStrings===!1;this.decodeStrings=!f,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(d){gr(r,d)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new ce(this)}j.prototype.getBuffer=function(){for(var r=this.bufferedRequest,t=[];r;)t.push(r),r=r.next;return t};(function(){try{Object.defineProperty(j.prototype,"buffer",{get:ar.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var D;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(D=Function.prototype[Symbol.hasInstance],Object.defineProperty(s,Symbol.hasInstance,{value:function(e){return D.call(this,e)?!0:this!==s?!1:e&&e._writableState instanceof j}})):D=function(e){return e instanceof this};function s(e){if(S=S||v(),!D.call(s,this)&&!(this instanceof S))return new s(e);this._writableState=new j(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),be.call(this)}s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function sr(e,r){var t=new Error("write after end");e.emit("error",t),y.nextTick(r,t)}function dr(e,r,t,i){var n=!0,a=!1;return t===null?a=new TypeError("May not write null values to stream"):typeof t!="string"&&t!==void 0&&!r.objectMode&&(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),y.nextTick(i,a),n=!1),n}s.prototype.write=function(e,r,t){var i=this._writableState,n=!1,a=!i.objectMode&&or(e);return a&&!B.isBuffer(e)&&(e=lr(e)),typeof r=="function"&&(t=r,r=null),a?r="buffer":r||(r=i.defaultEncoding),typeof t!="function"&&(t=ur),i.ended?sr(this,t):(a||dr(this,i,e,t))&&(i.pendingcb++,n=cr(this,i,a,e,r,t)),n};s.prototype.cork=function(){var e=this._writableState;e.corked++};s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&we(this,e))};s.prototype.setDefaultEncoding=function(r){if(typeof r=="string"&&(r=r.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((r+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+r);return this._writableState.defaultEncoding=r,this};function hr(e,r,t){return!e.objectMode&&e.decodeStrings!==!1&&typeof r=="string"&&(r=B.from(r,t)),r}Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function cr(e,r,t,i,n,a){if(!t){var f=hr(r,i,n);i!==f&&(t=!0,n="buffer",i=f)}var d=r.objectMode?1:i.length;r.length+=d;var c=r.length<r.highWaterMark;if(c||(r.needDrain=!0),r.writing||r.corked){var w=r.lastBufferedRequest;r.lastBufferedRequest={chunk:i,encoding:n,isBuf:t,callback:a,next:null},w?w.next=r.lastBufferedRequest:r.bufferedRequest=r.lastBufferedRequest,r.bufferedRequestCount+=1}else z(e,r,!1,d,i,n,a);return c}function z(e,r,t,i,n,a,f){r.writelen=i,r.writecb=f,r.writing=!0,r.sync=!0,t?e._writev(n,r.onwrite):e._write(n,a,r.onwrite),r.sync=!1}function pr(e,r,t,i,n){--r.pendingcb,t?(y.nextTick(n,i),y.nextTick(k,e,r),e._writableState.errorEmitted=!0,e.emit("error",i)):(n(i),e._writableState.errorEmitted=!0,e.emit("error",i),k(e,r))}function br(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function gr(e,r){var t=e._writableState,i=t.sync,n=t.writecb;if(br(t),r)pr(e,t,i,r,n);else{var a=ye(t);!a&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&we(e,t),i?nr(he,e,t,a,n):he(e,t,a,n)}}function he(e,r,t,i){t||wr(e,r),r.pendingcb--,i(),k(e,r)}function wr(e,r){r.length===0&&r.needDrain&&(r.needDrain=!1,e.emit("drain"))}function we(e,r){r.bufferProcessing=!0;var t=r.bufferedRequest;if(e._writev&&t&&t.next){var i=r.bufferedRequestCount,n=new Array(i),a=r.corkedRequestsFree;a.entry=t;for(var f=0,d=!0;t;)n[f]=t,t.isBuf||(d=!1),t=t.next,f+=1;n.allBuffers=d,z(e,r,!0,r.length,n,"",a.finish),r.pendingcb++,r.lastBufferedRequest=null,a.next?(r.corkedRequestsFree=a.next,a.next=null):r.corkedRequestsFree=new ce(r),r.bufferedRequestCount=0}else{for(;t;){var c=t.chunk,w=t.encoding,H=t.callback,x=r.objectMode?1:c.length;if(z(e,r,!1,x,c,w,H),t=t.next,r.bufferedRequestCount--,r.writing)break}t===null&&(r.lastBufferedRequest=null)}r.bufferedRequest=t,r.bufferProcessing=!1}s.prototype._write=function(e,r,t){t(new Error("_write() is not implemented"))};s.prototype._writev=null;s.prototype.end=function(e,r,t){var i=this._writableState;typeof e=="function"?(t=e,e=null,r=null):typeof r=="function"&&(t=r,r=null),e!=null&&this.write(e,r),i.corked&&(i.corked=1,this.uncork()),!i.ending&&!i.finished&&_r(this,i,t)};function ye(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function yr(e,r){e._final(function(t){r.pendingcb--,t&&e.emit("error",t),r.prefinished=!0,e.emit("prefinish"),k(e,r)})}function vr(e,r){!r.prefinished&&!r.finalCalled&&(typeof e._final=="function"?(r.pendingcb++,r.finalCalled=!0,y.nextTick(yr,e,r)):(r.prefinished=!0,e.emit("prefinish")))}function k(e,r){var t=ye(r);return t&&(vr(e,r),r.pendingcb===0&&(r.finished=!0,e.emit("finish"))),t}function _r(e,r,t){r.ending=!0,k(e,r),t&&(r.finished?y.nextTick(t):e.once("finish",t)),r.ended=!0,e.writable=!1}function Sr(e,r,t){var i=e.entry;for(e.entry=null;i;){var n=i.callback;r.pendingcb--,n(t),i=i.next}r.corkedRequestsFree?r.corkedRequestsFree.next=e:r.corkedRequestsFree=e}Object.defineProperty(s.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});s.prototype.destroy=ge.destroy;s.prototype._undestroy=ge.undestroy;s.prototype._destroy=function(e,r){this.end(),r(e)}});var v=p((Zr,Me)=>{"use strict";var _e=__process_nextick_args$,mr=Object.keys||function(e){var r=[];for(var t in e)r.push(t);return r};Me.exports=b;var Se=Object.create(__core_util_is$);Se.inherits=__inherits$;var me=V(),Q=G();Se.inherits(b,me);for(J=mr(Q.prototype),O=0;O<J.length;O++)L=J[O],b.prototype[L]||(b.prototype[L]=Q.prototype[L]);var J,L,O;function b(e){if(!(this instanceof b))return new b(e);me.call(this,e),Q.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Mr)}Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Mr(){this.allowHalfOpen||this._writableState.ended||_e.nextTick(xr,this)}function xr(e){e.end()}Object.defineProperty(b.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});b.prototype._destroy=function(e,r){this.push(null),this.end(),_e.nextTick(r,e)}});var V=p((et,Oe)=>{"use strict";var M=__process_nextick_args$;Oe.exports=u;var qr=__isarray$,W;u.ReadableState=We;var $r=__events$.EventEmitter,Ee=function(e,r){return e.listeners(r).length},re=N(),T=__safe_buffer$Buffer,Rr=__global$.Uint8Array||function(){};function Er(e){return T.from(e)}function kr(e){return T.isBuffer(e)||e instanceof Rr}var ke=Object.create(__core_util_is$);ke.inherits=__inherits$;var Y=__util$,l=void 0;Y&&Y.debuglog?l=Y.debuglog("stream"):l=function(){};var jr=oe(),je=X(),m;ke.inherits(u,re);var Z=["error","close","destroy","pause","resume"];function Wr(e,r,t){if(typeof e.prependListener=="function")return e.prependListener(r,t);!e._events||!e._events[r]?e.on(r,t):qr(e._events[r])?e._events[r].unshift(t):e._events[r]=[t,e._events[r]]}function We(e,r){W=W||v(),e=e||{};var t=r instanceof W;this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,n=e.readableHighWaterMark,a=this.objectMode?16:16*1024;i||i===0?this.highWaterMark=i:t&&(n||n===0)?this.highWaterMark=n:this.highWaterMark=a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new jr,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(m||(m=__string_decoder$.StringDecoder),this.decoder=new m(e.encoding),this.encoding=e.encoding)}function u(e){if(W=W||v(),!(this instanceof u))return new u(e);this._readableState=new We(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),re.call(this)}Object.defineProperty(u.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});u.prototype.destroy=je.destroy;u.prototype._undestroy=je.undestroy;u.prototype._destroy=function(e,r){this.push(null),r(e)};u.prototype.push=function(e,r){var t=this._readableState,i;return t.objectMode?i=!0:typeof e=="string"&&(r=r||t.defaultEncoding,r!==t.encoding&&(e=T.from(e,r),r=""),i=!0),Te(this,e,r,!1,i)};u.prototype.unshift=function(e){return Te(this,e,null,!0,!1)};function Te(e,r,t,i,n){var a=e._readableState;if(r===null)a.reading=!1,Br(e,a);else{var f;n||(f=Tr(a,r)),f?e.emit("error",f):a.objectMode||r&&r.length>0?(typeof r!="string"&&!a.objectMode&&Object.getPrototypeOf(r)!==T.prototype&&(r=Er(r)),i?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):$(e,a,r,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!t?(r=a.decoder.write(r),a.objectMode||r.length!==0?$(e,a,r,!1):Ce(e,a)):$(e,a,r,!1))):i||(a.reading=!1)}return Cr(a)}function $(e,r,t,i){r.flowing&&r.length===0&&!r.sync?(e.emit("data",t),e.read(0)):(r.length+=r.objectMode?1:t.length,i?r.buffer.unshift(t):r.buffer.push(t),r.needReadable&&P(e)),Ce(e,r)}function Tr(e,r){var t;return!kr(r)&&typeof r!="string"&&r!==void 0&&!e.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function Cr(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}u.prototype.isPaused=function(){return this._readableState.flowing===!1};u.prototype.setEncoding=function(e){return m||(m=__string_decoder$.StringDecoder),this._readableState.decoder=new m(e),this._readableState.encoding=e,this};var xe=8388608;function Dr(e){return e>=xe?e=xe:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function qe(e,r){return e<=0||r.length===0&&r.ended?0:r.objectMode?1:e!==e?r.flowing&&r.length?r.buffer.head.data.length:r.length:(e>r.highWaterMark&&(r.highWaterMark=Dr(e)),e<=r.length?e:r.ended?r.length:(r.needReadable=!0,0))}u.prototype.read=function(e){l("read",e),e=parseInt(e,10);var r=this._readableState,t=e;if(e!==0&&(r.emittedReadable=!1),e===0&&r.needReadable&&(r.length>=r.highWaterMark||r.ended))return l("read: emitReadable",r.length,r.ended),r.length===0&&r.ended?ee(this):P(this),null;if(e=qe(e,r),e===0&&r.ended)return r.length===0&&ee(this),null;var i=r.needReadable;l("need readable",i),(r.length===0||r.length-e<r.highWaterMark)&&(i=!0,l("length less than watermark",i)),r.ended||r.reading?(i=!1,l("reading or ended",i)):i&&(l("do read"),r.reading=!0,r.sync=!0,r.length===0&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=qe(t,r)));var n;return e>0?n=De(e,r):n=null,n===null?(r.needReadable=!0,e=0):r.length-=e,r.length===0&&(r.ended||(r.needReadable=!0),t!==e&&r.ended&&ee(this)),n!==null&&this.emit("data",n),n};function Br(e,r){if(!r.ended){if(r.decoder){var t=r.decoder.end();t&&t.length&&(r.buffer.push(t),r.length+=r.objectMode?1:t.length)}r.ended=!0,P(e)}}function P(e){var r=e._readableState;r.needReadable=!1,r.emittedReadable||(l("emitReadable",r.flowing),r.emittedReadable=!0,r.sync?M.nextTick(Re,e):Re(e))}function Re(e){l("emit readable"),e.emit("readable"),te(e)}function Ce(e,r){r.readingMore||(r.readingMore=!0,M.nextTick(Or,e,r))}function Or(e,r){for(var t=r.length;!r.reading&&!r.flowing&&!r.ended&&r.length<r.highWaterMark&&(l("maybeReadMore read 0"),e.read(0),t!==r.length);)t=r.length;r.readingMore=!1}u.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};u.prototype.pipe=function(e,r){var t=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e);break}i.pipesCount+=1,l("pipe count=%d opts=%j",i.pipesCount,r);var n=(!r||r.end!==!1)&&e!==__Process$.stdout&&e!==__Process$.stderr,a=n?d:q;i.endEmitted?M.nextTick(a):t.once("end",a),e.on("unpipe",f);function f(_,R){l("onunpipe"),_===t&&R&&R.hasUnpiped===!1&&(R.hasUnpiped=!0,H())}function d(){l("onend"),e.end()}var c=Lr(t);e.on("drain",c);var w=!1;function H(){l("cleanup"),e.removeListener("close",A),e.removeListener("finish",I),e.removeListener("drain",c),e.removeListener("error",F),e.removeListener("unpipe",f),t.removeListener("end",d),t.removeListener("end",q),t.removeListener("data",ne),w=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&c()}var x=!1;t.on("data",ne);function ne(_){l("ondata"),x=!1;var R=e.write(_);R===!1&&!x&&((i.pipesCount===1&&i.pipes===e||i.pipesCount>1&&Be(i.pipes,e)!==-1)&&!w&&(l("false write response, pause",t._readableState.awaitDrain),t._readableState.awaitDrain++,x=!0),t.pause())}function F(_){l("onerror",_),q(),e.removeListener("error",F),Ee(e,"error")===0&&e.emit("error",_)}Wr(e,"error",F);function A(){e.removeListener("finish",I),q()}e.once("close",A);function I(){l("onfinish"),e.removeListener("close",A),q()}e.once("finish",I);function q(){l("unpipe"),t.unpipe(e)}return e.emit("pipe",t),i.flowing||(l("pipe resume"),t.resume()),e};function Lr(e){return function(){var r=e._readableState;l("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&Ee(e,"data")&&(r.flowing=!0,te(e))}}u.prototype.unpipe=function(e){var r=this._readableState,t={hasUnpiped:!1};if(r.pipesCount===0)return this;if(r.pipesCount===1)return e&&e!==r.pipes?this:(e||(e=r.pipes),r.pipes=null,r.pipesCount=0,r.flowing=!1,e&&e.emit("unpipe",this,t),this);if(!e){var i=r.pipes,n=r.pipesCount;r.pipes=null,r.pipesCount=0,r.flowing=!1;for(var a=0;a<n;a++)i[a].emit("unpipe",this,t);return this}var f=Be(r.pipes,e);return f===-1?this:(r.pipes.splice(f,1),r.pipesCount-=1,r.pipesCount===1&&(r.pipes=r.pipes[0]),e.emit("unpipe",this,t),this)};u.prototype.on=function(e,r){var t=re.prototype.on.call(this,e,r);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var i=this._readableState;!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&P(this):M.nextTick(Pr,this))}return t};u.prototype.addListener=u.prototype.on;function Pr(e){l("readable nexttick read 0"),e.read(0)}u.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!0,Ur(this,e)),this};function Ur(e,r){r.resumeScheduled||(r.resumeScheduled=!0,M.nextTick(Hr,e,r))}function Hr(e,r){r.reading||(l("resume read 0"),e.read(0)),r.resumeScheduled=!1,r.awaitDrain=0,e.emit("resume"),te(e),r.flowing&&!r.reading&&e.read(0)}u.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function te(e){var r=e._readableState;for(l("flow",r.flowing);r.flowing&&e.read()!==null;);}u.prototype.wrap=function(e){var r=this,t=this._readableState,i=!1;e.on("end",function(){if(l("wrapped end"),t.decoder&&!t.ended){var f=t.decoder.end();f&&f.length&&r.push(f)}r.push(null)}),e.on("data",function(f){if(l("wrapped data"),t.decoder&&(f=t.decoder.write(f)),!(t.objectMode&&f==null)&&!(!t.objectMode&&(!f||!f.length))){var d=r.push(f);d||(i=!0,e.pause())}});for(var n in e)this[n]===void 0&&typeof e[n]=="function"&&(this[n]=function(f){return function(){return e[f].apply(e,arguments)}}(n));for(var a=0;a<Z.length;a++)e.on(Z[a],this.emit.bind(this,Z[a]));return this._read=function(f){l("wrapped _read",f),i&&(i=!1,e.resume())},this};Object.defineProperty(u.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});u._fromList=De;function De(e,r){if(r.length===0)return null;var t;return r.objectMode?t=r.buffer.shift():!e||e>=r.length?(r.decoder?t=r.buffer.join(""):r.buffer.length===1?t=r.buffer.head.data:t=r.buffer.concat(r.length),r.buffer.clear()):t=Fr(e,r.buffer,r.decoder),t}function Fr(e,r,t){var i;return e<r.head.data.length?(i=r.head.data.slice(0,e),r.head.data=r.head.data.slice(e)):e===r.head.data.length?i=r.shift():i=t?Ar(e,r):Ir(e,r),i}function Ar(e,r){var t=r.head,i=1,n=t.data;for(e-=n.length;t=t.next;){var a=t.data,f=e>a.length?a.length:e;if(f===a.length?n+=a:n+=a.slice(0,e),e-=f,e===0){f===a.length?(++i,t.next?r.head=t.next:r.head=r.tail=null):(r.head=t,t.data=a.slice(f));break}++i}return r.length-=i,n}function Ir(e,r){var t=T.allocUnsafe(e),i=r.head,n=1;for(i.data.copy(t),e-=i.data.length;i=i.next;){var a=i.data,f=e>a.length?a.length:e;if(a.copy(t,t.length-e,0,f),e-=f,e===0){f===a.length?(++n,i.next?r.head=i.next:r.head=r.tail=null):(r.head=i,i.data=a.slice(f));break}++n}return r.length-=n,t}function ee(e){var r=e._readableState;if(r.length>0)throw new Error('"endReadable()" called on non-empty stream');r.endEmitted||(r.ended=!0,M.nextTick(Nr,r,e))}function Nr(e,r){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,r.readable=!1,r.emit("end"))}function Be(e,r){for(var t=0,i=e.length;t<i;t++)if(e[t]===r)return t;return-1}});var ie=p((rt,Ue)=>{"use strict";Ue.exports=g;var U=v(),Pe=Object.create(__core_util_is$);Pe.inherits=__inherits$;Pe.inherits(g,U);function Kr(e,r){var t=this._transformState;t.transforming=!1;var i=t.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));t.writechunk=null,t.writecb=null,r!=null&&this.push(r),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function g(e){if(!(this instanceof g))return new g(e);U.call(this,e),this._transformState={afterTransform:Kr.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Xr)}function Xr(){var e=this;typeof this._flush=="function"?this._flush(function(r,t){Le(e,r,t)}):Le(this,null,null)}g.prototype.push=function(e,r){return this._transformState.needTransform=!1,U.prototype.push.call(this,e,r)};g.prototype._transform=function(e,r,t){throw new Error("_transform() is not implemented")};g.prototype._write=function(e,r,t){var i=this._transformState;if(i.writecb=t,i.writechunk=e,i.writeencoding=r,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};g.prototype._read=function(e){var r=this._transformState;r.writechunk!==null&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};g.prototype._destroy=function(e,r){var t=this;U.prototype._destroy.call(this,e,function(i){r(i),t.emit("close")})};function Le(e,r,t){if(r)return e.emit("error",r);if(t!=null&&e.push(t),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var Ie=p((tt,Ae)=>{"use strict";Ae.exports=C;var He=ie(),Fe=Object.create(__core_util_is$);Fe.inherits=__inherits$;Fe.inherits(C,He);function C(e){if(!(this instanceof C))return new C(e);He.call(this,e)}C.prototype._transform=function(e,r,t){t(null,e)}});var Ke=p((h,Ne)=>{h=Ne.exports=V();h.Stream=h;h.Readable=h;h.Writable=G();h.Duplex=v();h.Transform=ie();h.PassThrough=Ie()});var ze=$e(Ke()),{Stream:it,Readable:nt,Writable:at,Duplex:ft,Transform:lt,PassThrough:ot}=ze,{default:Xe,...zr}=ze,ut=Xe!==void 0?Xe:zr;export{ft as Duplex,ot as PassThrough,nt as Readable,it as Stream,lt as Transform,at as Writable,ut as default};
